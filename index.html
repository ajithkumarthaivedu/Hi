<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sri Matha Restorent</title>
  <style>
    /* Reset and base */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; overflow: hidden; font-family: system-ui, Arial, sans-serif; color: #222; }

    /* Fixed header and footer */
    header, footer {
      position: fixed; left: 0; right: 0; background: #f8f8f8; z-index: 1000;
      text-align: center;
    }
    header { top: 0; padding: 10px 12px; font-weight: 700; font-size: 18px; border-bottom: 1px solid #e5e5e5; }
    footer { bottom: 0; padding: 8px 12px; font-size: 14px; border-top: 1px solid #e5e5e5; }

    /* Fixed top bar: tabs + current page name */
    .topbar {
      position: fixed; top: 46px; left: 0; right: 0; background: #ffffff; z-index: 1000;
      border-bottom: 1px solid #eee;
    }
    .tabs {
      display: flex; gap: 6px; padding: 8px 8px; overflow-x: auto; -webkit-overflow-scrolling: touch;
    }
    .tab {
      flex: 1; min-width: 88px; text-align: center; padding: 10px 8px; cursor: pointer;
      border: 1px solid #ddd; border-radius: 8px; font-size: 14px; background: #fafafa;
    }
    .tab.active {
      background: #e9f2ff; border-color: #2F66FF; color: #2F66FF; font-weight: 700;
    }
    .page-title {
      padding: 8px 12px; font-size: 15px; font-weight: 700; color: #444;
    }

    /* Content area (scrolls within, page itself doesnâ€™t) */
    .content {
      position: absolute; left: 0; right: 0;
      top: 46px; /* header height */
    }
    /* height = total viewport minus header(46) minus topbar(~86) minus footer(~42) */
    .content-inner {
      position: absolute; left: 0; right: 0;
      top: 86px; /* topbar total */
      bottom: 42px; /* footer height */
      padding: 8px 10px;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      background: #fff;
    }

    /* Item rows */
    .item {
      display: flex; align-items: center; justify-content: space-between;
      padding: 12px 10px; border-bottom: 1px solid #eee; cursor: pointer;
    }
    .item-name { font-size: 15px; }
    .item-price { font-weight: 700; color: #333; }

    /* Selected state */
    .item.selected { background: #dff6e6; } /* light green */

    /* Floating cart icon (outline color, transparent fill) */
    .floating-cart {
      position: fixed; bottom: 64px; right: 18px; width: 52px; height: 52px;
      border: 2px solid #2F66FF; border-radius: 50%; background: transparent;
      display: flex; align-items: center; justify-content: center; font-size: 24px;
      color: #2F66FF; cursor: pointer; z-index: 1100; box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    .hidden { display: none; }

    /* Selected items page */
    .total {
      position: sticky; top: 0; background: #fff; padding: 10px 10px; border-bottom: 1px solid #eee;
      font-weight: 800; font-size: 16px;
    }
    .qty {
      display: inline-flex; align-items: center; gap: 8px; margin-left: 8px;
    }
    .qty input {
      width: 52px; height: 30px; font-size: 14px; text-align: center;
      border: 1px solid #ccc; border-radius: 6px;
    }
    .muted {
      color: #666; font-size: 13px; padding: 10px;
    }
  </style>
</head>
<body>
  <header>Sri Matha Restorent</header>

  <div class="topbar">
    <div class="tabs" id="tabs">
      <div class="tab active" data-page="Tiffin">Tiffin</div>
      <div class="tab" data-page="Lunch">Lunch</div>
      <div class="tab" data-page="Dinner">Dinner</div>
      <div class="tab" data-page="Snacks">Snacks</div>
      <div class="tab" data-page="Beverages">Beverages</div>
    </div>
    <div class="page-title" id="pageTitle">Tiffin</div>
  </div>

  <div class="content">
    <div class="content-inner" id="content"></div>
  </div>

  <!-- Floating cart icon -->
  <div class="floating-cart hidden" id="cartBtn" title="Selected items">
    ðŸ›’
  </div>

  <footer>123 Sample Street, Bengaluru, Karnataka</footer>

  <script>
    // Menu data
    const menu = {
      Tiffin: [
        { name: "Idli", price: 30 },
        { name: "Dosa", price: 40 },
        { name: "Vada", price: 25 },
        { name: "Upma", price: 35 }
      ],
      Lunch: [
        { name: "Veg Meals", price: 80 },
        { name: "Curd Rice", price: 60 },
        { name: "Sambar Rice", price: 55 },
        { name: "Chicken Curry", price: 120 }
      ],
      Dinner: [
        { name: "Chapati", price: 20 },
        { name: "Paratha", price: 25 },
        { name: "Paneer Curry", price: 100 },
        { name: "Dal Fry", price: 70 }
      ],
      Snacks: [
        { name: "Samosa", price: 15 },
        { name: "Pakoda", price: 25 },
        { name: "Bhel Puri", price: 30 },
        { name: "Pani Puri", price: 25 }
      ],
      Beverages: [
        { name: "Tea", price: 10 },
        { name: "Coffee", price: 15 },
        { name: "Badam Milk", price: 35 },
        { name: "Lassi", price: 30 }
      ]
    };

    // State
    let currentPage = "Tiffin";
    const selectedItems = {}; // key: item name -> { name, price, qty }

    // Init
    const tabsEl = document.getElementById("tabs");
    const pageTitleEl = document.getElementById("pageTitle");
    const contentEl = document.getElementById("content");
    const cartBtnEl = document.getElementById("cartBtn");

    // Tab interactions
    tabsEl.addEventListener("click", (e) => {
      const tab = e.target.closest(".tab");
      if (!tab) return;
      const page = tab.getAttribute("data-page");
      showPage(page);
    });

    // Floating cart -> Selected Items page
    cartBtnEl.addEventListener("click", () => showPage("Selected"));

    function showPage(page) {
      currentPage = page;
      // Highlight active tab
      document.querySelectorAll(".tab").forEach(t => {
        t.classList.toggle("active", t.getAttribute("data-page") === page);
      });
      // Fix page name at top
      pageTitleEl.textContent = page === "Selected" ? "Selected Items" : page;

      // Toggle cart visibility
      const hasSelection = Object.keys(selectedItems).length > 0;
      cartBtnEl.classList.toggle("hidden", !hasSelection || page === "Selected");

      // Render
      contentEl.innerHTML = "";

      if (page === "Selected") {
        renderSelected();
        return;
      }
      renderItems(menu[page]);
    }

    function renderItems(items) {
      items.forEach(item => {
        const row = document.createElement("div");
        row.className = "item";
        if (selectedItems[item.name]) row.classList.add("selected");

        const nameEl = document.createElement("div");
        nameEl.className = "item-name";
        nameEl.textContent = item.name;

        const priceEl = document.createElement("div");
        priceEl.className = "item-price";
        priceEl.textContent = `â‚¹${item.price}`;

        row.appendChild(nameEl);
        row.appendChild(priceEl);

        // Tap toggles select/unselect
        row.addEventListener("click", () => toggleItem(item.name, item.price));
        contentEl.appendChild(row);
      });

      if (!items.length) {
        const empty = document.createElement("div");
        empty.className = "muted";
        empty.textContent = "No items available.";
        contentEl.appendChild(empty);
      }
    }

    function renderSelected() {
      // Total on top
      let total = 0;
      const totalEl = document.createElement("div");
      totalEl.className = "total";
      contentEl.appendChild(totalEl);

      const names = Object.keys(selectedItems);
      if (!names.length) {
        totalEl.textContent = "Total: â‚¹0";
        const empty = document.createElement("div");
        empty.className = "muted";
        empty.textContent = "No items selected. Tap items in any page to add.";
        contentEl.appendChild(empty);
        return;
      }

      names.forEach(name => {
        const item = selectedItems[name];
        total += item.price * item.qty;

        const row = document.createElement("div");
        row.className = "item selected";

        const left = document.createElement("div");
        left.className = "item-name";
        left.textContent = `${item.name} â€” â‚¹${item.price}`;

        const right = document.createElement("div");
        right.className = "item-price";
        right.innerHTML = `
          <span>â‚¹${item.price * item.qty}</span>
          <span class="qty">
            <label for="qty-${cssId(name)}" style="display:none">Qty</label>
            <input id="qty-${cssId(name)}" type="number" min="1" value="${item.qty}" />
          </span>
        `;

        // Tap row to unselect
        row.addEventListener("click", (e) => {
          // If the tap was on the qty input, don't toggle
          if (e.target && e.target.tagName === "INPUT") return;
          toggleItem(item.name, item.price);
        });

        // Qty change
        right.querySelector("input").addEventListener("input", (e) => {
          const v = Math.max(1, parseInt(e.target.value || "1", 10));
          updateQty(item.name, v);
        });

        row.appendChild(left);
        row.appendChild(right);
        contentEl.appendChild(row);
      });

      totalEl.textContent = `Total: â‚¹${total}`;
    }

    function toggleItem(name, price) {
      if (selectedItems[name]) {
        delete selectedItems[name];
      } else {
        selectedItems[name] = { name, price, qty: 1 };
      }
      showPage(currentPage);
    }

    function updateQty(name, qty) {
      if (selectedItems[name]) {
        selectedItems[name].qty = qty;
        // Re-render selected page to update totals
        if (currentPage === "Selected") renderSelected();
      }
    }

    function cssId(text) {
      return text.toLowerCase().replace(/\s+/g, "-").replace(/[^a-z0-9\-]/g, "");
    }

    // First load
    showPage("Tiffin");
  </script>
</body>
</html>
